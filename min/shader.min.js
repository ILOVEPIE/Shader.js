/*
 |   shader.min.js (Closure Compiled shader.js) - A small and compact closure-compiler compatible javascript library for managing shaders.
 |----------------
 |  shader.js, and all compiled versions of shader.js are copyright Patrick Rhodes Martin, 2013, 2019.
 |-
 */
window.c={};
window.ShaderPrototype=Object.create(Object,{f:{value:null,writable:!0},a:{value:Object.create(Object),writable:!0},o:{value:function(a){var e=a.b;a=a.m;var b,d=!0;if(e===a)return!0;if(e instanceof Array&&a instanceof Array){if(e.length!=a.length)return!1;for(b=0;b<e.length;b++)d=d&&e[b]===a[b];return d}return!1},writable:!1},load:{value:function(a,e,b){if("undefined"===typeof window.localStorage||"undefined"===typeof b||0>=b){if("undefined"===typeof window.c[a]){var d=new XMLHttpRequest;d.open("GET",
a,!1);d.send();200===d.status&&(this.h=window.c[a]=d.responseText)}else this.h=window.c[a];"undefined"===typeof window.c[e]?(d=new XMLHttpRequest,d.open("GET",e,!1),d.send(),200===d.status&&(this.g=window.c[e]=d.responseText)):this.g=window.c[e]}else null===window.localStorage.getItem(a)||parseInt(window.localStorage.getItem(a).split("\u0003")[1],16)<window.Date.now()?(d=new XMLHttpRequest,d.open("GET",a,!1),d.send(),200===d.status&&(window.localStorage.setItem(a,d.responseText+"\u0003"+(864E5*b+
window.Date.now()).toString(16)),this.h=d.responseText)):this.h=window.localStorage.getItem(a).split("\u0003")[0],null===window.localStorage.getItem(e)||parseInt(window.localStorage.getItem(e).split("\u0003")[1],16)<window.Date.now()?(d=new XMLHttpRequest,d.open("GET",e,!1),d.send(),200===d.status&&(window.localStorage.setItem(e,d.responseText+"\u0003"+(864E5*b+window.Date.now()).toString(16)),this.g=d.responseText)):this.g=window.localStorage.getItem(e).split("\u0003")[0]}},updateOption:{value:function(a,
e){return this.a[a]?(this.a[a].b=e,!0):!1},writable:!1},addOption:{value:function(a,e,b){return null==this.a[a]?(this.a[a]={b:e,s:b,m:null},!0):!1},writable:!1},bindShader:{value:function(a){a.useProgram(this.f);for(var e=this.a.keys(this.a),b,d,g,f=0;f<e.length;f++)if(b=e[f],!this.o(this.a[b])&&(d=a.getUniformLocation(this.f,b),null!=(d||null))){g=this.a[b].s;switch(g){case "1f":a.uniform1f(d,this.a[b].b);break;case "2f":a.uniform2f(d,this.a[b].b[0],this.a[b].b[1]);break;case "3f":a.uniform3f(d,
this.a[b].b[0],this.a[b].b[1],this.a[b].b[2]);break;case "4f":a.uniform4f(d,this.a[b].b[0],this.a[b].b[1],this.a[b].b[2],this.a[b].b[3]);break;case "1i":a.uniform1i(d,this.a[b].b);break;case "2i":a.uniform2i(d,this.a[b].b[0],this.a[b].b[1]);break;case "3i":a.uniform3i(d,this.a[b].b[0],this.a[b].b[1],this.a[b].b[2]);break;case "4i":a.uniform4i(d,this.a[b].b[0],this.a[b].b[1],this.a[b].b[2],this.a[b].b[3]);break;case "1fv":a.uniform1fv(d,this.a[b].b);break;case "2fv":a.uniform2fv(d,this.a[b].b);break;
case "3fv":a.uniform3fv(d,this.a[b].b);break;case "4fv":a.uniform4fv(d,this.a[b].b);break;case "1iv":a.uniform1iv(d,this.a[b].b);break;case "2iv":a.uniform2iv(d,this.a[b].b);break;case "3iv":a.uniform3iv(d,this.a[b].b);break;case "4iv":a.uniform4iv(d,this.a[b].b);break;case "Matrix2fv":a.uniformMatrix2fv(d,!1,this.a[b].b);break;case "Matrix3fv":a.uniformMatrix3fv(d,!1,this.a[b].b);break;case "Matrix4fv":a.uniformMatrix4fv(d,!1,this.a[b].b)}this.a[b].m=this.a[b].b}},writable:!1},getShader:{value:function(){return this.f},
writable:!1},compile:{value:function(a,e){var b;this.f=b=a.createProgram();this.l=this.i(a,this.h,a.VERTEX_SHADER);this.j=this.i(a,this.g,a.FRAGMENT_SHADER);a.attachShader(b,this.l);a.attachShader(b,this.j);a.linkProgram(b);if(!a.getProgramParameter(b,a.LINK_STATUS)){var d=a.getProgramInfoLog(b);a.deleteProgram(b);a.deleteShader(this.l);a.deleteShader(this.j);if(e)e();else throw Error(d);}},writable:!1},i:{value:function(a,e,b){b=a.createShader(b);a.shaderSource(b,"#ifdef GL_ES\nprecision highp float;\n#endif\n"+
e);a.compileShader(b);return a.getShaderParameter(b,a.COMPILE_STATUS)?b:(console.debug(a.getShaderInfoLog(b)),a.deleteShader(b),null)}}});
